!function e(r,t,n){function o(a,l){if(!t[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};r[a][0].call(s.exports,function(e){var t=r[a][1][e];return o(t?t:e)},s,s.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){"use strict";var n=e("./dragularModule");n.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i=r.$eval(n.dragular)||o(n.dragular)||{};n.dragularModel?i=angular.extend({containersModel:r.$eval(n.dragularModel)},i):i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=r.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,r,t){"use strict";r.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,r,t){"use strict";var n=e("./dragularModule");n.factory("dragularService",["$rootScope",function(e){function r(e,r,t,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[r](o[t],n),i[r](t,n)}function t(){return!1}function n(){return!0}function o(e){return e.width||e.right-e.left}function i(e){return e.height||e.bottom-e.top}function a(){return{}}function l(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function c(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function u(e){var r=b.classesCache[e];return r?r.lastIndex=0:b.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function s(e,r){var t=e.className;t.length?u(r).test(t)||(e.className+=" "+r):e.className=r}function d(e,r){e.className=e.className.replace(u(r)," ").trim()}function f(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function m(e,r){var t=f(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:t.type.indexOf("end")>-1?void 0:t.originalEvent.touches[0][e.replace("client","page")]}function g(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function p(e){return e.parentNode===document?null:e.parentNode}function v(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||h(e)}function h(e){return e?"false"===e.contentEditable?!1:"true"===e.contentEditable?!0:h(p(e)):!1}function y(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function x(e,r,t){e&&(b.extra=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}var b={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},M=function(u,f){function h(){1!==arguments.length||Array.isArray(u)||angular.isElement(u)||u[0]||"string"==typeof u?"string"==typeof u&&(oe=document.querySelectorAll(u)):(ie=u||{},oe=[])}function M(){angular.extend(se,ie),se.classes=angular.extend({},ue,se.classes)}function C(){c(se.boundingBox)||(se.boundingBox=!1),se.containers&&(oe=se.containers),oe=X(oe),Array.isArray(se.containersModel)?se.containersModel=Array.isArray(se.containersModel[0])?se.containersModel:[se.containersModel]:se.containersModel=[],se.nameSpace||(se.nameSpace=["dragularCommon"]),Array.isArray(se.nameSpace)||(se.nameSpace=[se.nameSpace]),se.nameSpace.forEach(function(e){b.containers[e]||(b.containers[e]=[],b.containersCtx[e]=[]);for(var r=oe.length,t=b.containers[e].length,n=0;r>n;n++)b.containers[e][n+t]=oe[n],b.containersCtx[e][n+t]={o:se,m:se.containersModel[n]}})}function S(e){var t=e?"off":"on";r(ce,t,"mouseup",L),oe.forEach(function(e){r(e,"on","mousedown",w)}),e||angular.forEach(se.dragOverEventNames,function(e){ae.createEvent?(b.dragOverEvents[e]=ae.createEvent("HTMLEvents"),b.dragOverEvents[e].initEvent(e,!0,!0)):(b.dragOverEvents[e]=ae.createEventObject(),b.dragOverEvents[e].eventType=e)})}function E(e){if(!e)return!1;for(var r=se.nameSpace.length;r--;)if(-1!==b.containers[se.nameSpace[r]].indexOf(e))return!0;return se.isContainer(e)?(b.isContainerModel=se.isContainerModel(e),!0):(b.isContainerModel=null,!1)}function X(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function Y(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:X(r);e.forEach(function(e){angular.forEach(se.nameSpace,function(r){var t;t=b.containers[r].indexOf(e),b.containers[r].splice(t,1),b.containersCtx[r].splice(t,1)})})})}function O(e){var t=e?"off":"on";r(ce,t,"mousemove",B)}function I(e){var t=e?"off":"on";r(ce,t,"selectstart",N),r(ce,t,"click",N),r(ce,t,"touchmove",N)}function T(){S(!0),Y(oe),L({})}function N(e){b.grabbed&&e.preventDefault()}function w(e){if(e=e||window.event,b.moveX=e.clientX,b.moveY=e.clientY,1===g(e)&&!e.metaKey&&!e.ctrlKey){var r=A(e.target);r&&r.item&&(b.grabbed=r,O(),"mousedown"===e.type&&(v(r.item)?r.item.focus():e.preventDefault()))}}function B(e){if(b.grabbed&&!de.dragging){if(0===g(e))return void L({});if(!e.clientX||e.clientX!==b.moveX||!e.clientY||e.clientY!==b.moveY){if(se.ignoreInputTextSelection){var r=m("clientX",e),t=m("clientY",e),n=ae.elementFromPoint(r,t);if(v(n))return}var o=b.grabbed;if(O(!0),I(),j(),D(o),!se.direction&&p(b.sourceItem)){var i=b.sourceItem.parentNode,a=i.offsetHeight,l=i.offsetWidth,c=b.sourceItem.clientHeight,u=b.sourceItem.clientWidth;se.direction=l/u>a/c?"horizontal":"vertical"}var d=te(b.sourceItem);b.offsetX=m("pageX",e)-d.left,b.offsetY=m("pageY",e)-d.top,b.clientX=m("clientX",e),b.clientY=m("clientY",e),se.boundingBox&&(b.offsetXr=m("pageX",e)-d.right,b.offsetYb=m("pageY",e)-d.bottom),e.preventDefault(),s(b.item,se.classes.transit),G(),b.mirror.style.left=b.clientX-b.offsetX+"px",b.mirror.style.top=b.clientY-b.offsetY+"px",z(e)}}}function A(e){if(!de.dragging||!b.mirror){for(var r=e;p(e)&&!E(p(e));){if(se.invalid(e,r))return;if(e=p(e),!e)return}var t=p(e);if(t&&!se.invalid(e,r)&&se.moves(e,t,r,l(e)))return{item:e,source:t}}}function $(e){var r=A(e);r&&D(r)}function D(e){b.sourceItem=b.item=e.item,b.source=e.source,b.initialSibling=b.currentSibling=l(e.item),ee(e.item,e.source)?(b.item=e.item.cloneNode(!0),b.copy=!0,se.scope&&se.scope.$emit("dragularcloned",b.item,e.item)):b.copy=!1;var r=oe.indexOf(e.source);return b.sourceModel=se.containersModel[r],b.initialIndex=y(e.item,e.source),de.dragging=!0,se.scope&&se.scope.$emit("dragulardrag",b.sourceItem,b.source),!0}function H(){return!1}function j(){de.dragging&&b.item&&R(b.item,p(b.item))}function k(){b.grabbed=!1,O("remove"),I("remove")}function L(e){if(k(),de.dragging){e=e||window.event,b.clientX=m("clientX",e),b.clientY=m("clientY",e);var r=ne(b.mirror,b.clientX,b.clientY),t=U(r,b.clientX,b.clientY);t&&(b.copy&&se.copySortSource||!b.copy||t!==b.source)?R(b.item,t):se.removeOnSpill?q():W(),b.target=null,b.lastElementBehindCursor&&x(b.lastElementBehindCursor,b.dragOverEvents.dragularrelease,r),se.scope&&se.scope.$emit("dragularrelease",b.item,b.source)}}function R(r,t){function n(){se.scope&&(F(t)?se.scope.$emit("dragularcancel",r,b.source,b.sourceModel,b.initialIndex):se.scope.$emit("dragulardrop",r,t,b.source,b.sourceModel,b.initialIndex,b.targetModel,o))}b.copy&&se.copySortSource&&t===b.source&&p(r)&&r.parentNode.removeChild(b.sourceItem);var o=y(r,t);if(b.sourceModel&&!F(t)){var i=r;e.$applyAsync(function(){t===b.source?b.sourceModel.splice(o,0,b.sourceModel.splice(b.initialIndex,1)[0]):(b.dropElmModel=b.copy?angular.copy(b.sourceModel[b.initialIndex]):b.sourceModel[b.initialIndex],b.isContainerModel?b.targetModel=b.isContainerModel:b.targetModel=b.targetCtx.m,t.removeChild(i),b.copy||b.sourceModel.splice(b.initialIndex,1),b.targetModel.splice(o,0,b.dropElmModel)),p(r)&&r.parentNode.removeChild(r),n(),P()})}else n(),P()}function q(){if(de.dragging){var r=p(b.item);r&&r.removeChild(b.item),b.sourceModel&&e.$applyAsync(function(){b.sourceModel.splice(b.initialIndex,1),P()}),se.scope&&se.scope.$emit(b.copy?"dragularcancel":"dragularremove",b.item,r,b.sourceModel,b.initialIndex),b.sourceModel||P()}}function W(e){if(de.dragging){var r=arguments.length>0?e:se.revertOnSpill,t=p(b.item),n=F(t);n||b.copy||!r||b.source.insertBefore(b.item,b.initialSibling),!b.sourceModel||b.copy||r?se.scope&&(n||r)&&se.scope.$emit("dragularcancel",b.item,b.source):R(b.item,t),(!b.sourceModel||b.copy||r||n)&&P()}}function P(){k(),Q(),b.item&&d(b.item,se.classes.transit),de.dragging=!1,se.removeOnSpill===!0&&_(),se.scope&&(b.lastDropTarget&&se.scope.$emit("dragularout",b.item,b.lastDropTarget,b.source),se.scope.$emit("dragulardragend",b.item)),b.source=b.item=b.sourceItem=b.initialSibling=b.currentSibling=b.sourceModel=null,b.initialIndex=b.currentIndex=b.lastDropTarget=b.isContainerModel=b.targetModel=null,b.dropElmModel=b.targetCtx=b.copy=b.moveX=b.moveY=null}function F(e,r){var t=r||(b.mirror?b.currentSibling:l(b.item));return e===b.source&&t===b.initialSibling}function U(e,r,t){function n(){var n=!1;if(E(o)){for(var i=V(o,e),a=Z(o,i,r,t),l=F(o,a),c=se.nameSpace.length;c--;){if(-1!==b.containers[se.nameSpace[c]].indexOf(o)){b.targetCtx=b.containersCtx[se.nameSpace[c]][b.containers[se.nameSpace[c]].indexOf(o)];break}b.targetCtx||(b.targetCtx=b.containersCtx.dragularCommon[b.containersdragularCommon.indexOf(o)])}n=l||b.targetCtx.o.accepts(b.item,o,b.source,a,b.sourceModel,b.initialIndex)&&se.canBeAccepted(b.item,o,b.source,a,b.sourceModel,b.initialIndex),b.target!==o&&(b.target=o)}return n}for(var o=e;o&&!n();)o=p(o);return o}function z(e){function r(e){se.scope&&se.scope.$emit("dragular"+e,b.item,b.lastDropTarget,b.source),se.removeOnSpill===!0&&("over"===e?K():_())}function t(){f&&r("over")}function n(){b.lastDropTarget&&r("out")}if(b.mirror){e=e||window.event,b.clientX=m("clientX",e),b.clientY=m("clientY",e);var o,i,a,c=b.clientX-b.offsetX,u=b.clientY-b.offsetY;se.boundingBox&&(o=m("pageX",e),i=m("pageY",e),a=te(se.boundingBox)),se.lockY||(!se.boundingBox||o>a.left+b.offsetX&&o<a.right+b.offsetXr?b.mirror.style.left=c+"px":se.boundingBox&&(o<a.left+b.offsetX?b.mirror.style.left=b.clientX-(o-a.left)+"px":b.mirror.style.left=b.clientX-b.mirrorWidth-(o-a.right)+"px")),se.lockX||(!se.boundingBox||i>a.top+b.offsetY&&i<a.bottom+b.offsetYb?b.mirror.style.top=u+"px":se.boundingBox&&(i<a.top+b.offsetY?b.mirror.style.top=b.clientY-(i-a.top)+"px":b.mirror.style.top=b.clientY-b.mirrorHeight-(i-a.bottom)+"px"));var s=ne(b.mirror,b.clientX,b.clientY),d=U(s,b.clientX,b.clientY),f=d!==b.lastDropTarget;if(s!==b.lastElementBehindCursor&&(x(s,b.dragOverEvents.dragularenter,!!d),b.lastElementBehindCursor&&x(b.lastElementBehindCursor,b.dragOverEvents.dragularleave,s),b.lastElementBehindCursor=s),f&&(n(),b.lastDropTarget=d,t()),d===b.source&&b.copy&&!se.copySortSource)return void(p(b.item)&&b.item.parentNode.removeChild(b.item));var g,v=V(d,s);if(null!==v)g=Z(d,v,b.clientX,b.clientY);else{if(se.revertOnSpill!==!0||b.copy)return void(b.copy&&p(b.item)&&b.item.parentNode.removeChild(b.item));g=b.initialSibling,d=b.source}(null===g||g!==b.item&&g!==l(b.item)&&g!==b.currentSibling)&&(b.currentSibling=g,d.insertBefore(b.item,g),se.scope&&se.scope.$emit("dragularshadow",b.item,d))}}function K(){d(b.item,se.classes.hide)}function _(){de.dragging&&s(b.item,se.classes.hide)}function J(e){if(b.target){var r=b.target.scrollTop;b.target.scrollTop+=e.deltaY,r!==b.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function G(){if(!b.mirror){var e=b.sourceItem.getBoundingClientRect();b.mirror=b.sourceItem.cloneNode(!0),b.mirrorWidth=e.width,b.mirrorHeight=e.height,b.mirror.style.width=o(e)+"px",b.mirror.style.height=i(e)+"px",d(b.mirror,se.classes.transit),s(b.mirror,se.classes.mirror),se.mirrorContainer.appendChild(b.mirror),r(ce,"on","mousemove",z),s(le,se.classes.unselectable),r(b.mirror,"on","wheel",J),se.scope&&se.scope.$emit("dragularcloned",b.mirror,b.sourceItem)}}function Q(){b.mirror&&(d(le,se.classes.unselectable),r(ce,"off","mousemove",z),r(b.mirror,"off","wheel",J),p(b.mirror)&&b.mirror.parentNode.removeChild(b.mirror),b.mirror=null)}function V(e,r){for(var t=r;t!==e&&p(t)!==e;)t=p(t);return t===ce?null:t}function Z(e,r,t,n){function a(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),s&&i.left>t)return o;if(!s&&i.top>n)return o}return null}function c(){var e=r.getBoundingClientRect();return u(s?t>e.left+o(e)/2:n>e.top+i(e)/2)}function u(e){return e?l(r):r}var s="horizontal"===se.direction,d=r!==e?c():a();return d}function ee(e,r){return"boolean"==typeof se.copy?se.copy:se.copy(e,r)}function re(e,r){return"undefined"!=typeof window[r]?window[r]:ce.clientHeight?ce[e]:le[e]}function te(e){var r=e.getBoundingClientRect(),t=re("scrollTop","pageYOffset"),n=re("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function ne(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+se.classes.hide,n=ae.elementFromPoint(r,t),o.className=i,n}var oe=u||[],ie=f||{},ae=document,le=ae.body,ce=ae.documentElement,ue={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},se={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:ue,containers:!1,moves:n,accepts:n,canBeAccepted:n,isContainer:t,copy:!1,invalid:H,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:a,mirrorContainer:ae.body};h(),M(),C(),S();var de={containers:b.containers,containersCtx:b.containersCtx,isContainer:E,start:$,end:j,cancel:W,remove:q,destroy:T,dragging:!1};return de};return M.cleanEnviroment=function(){b.classesCache={},b.containersCtx={},b.containers={},b.mirror=void 0},M.shared=b,M}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map
