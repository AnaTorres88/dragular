!function e(r,t,n){function o(a,l){if(!t[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};r[a][0].call(s.exports,function(e){var t=r[a][1][e];return o(t?t:e)},s,s.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){"use strict";var n=e("./dragularModule");n.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i,a=r.$eval(n.dragular)||o(n.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=r.$eval(a.containersModel)),a&&a.dynamicModelAttribute?r.$watch(function(){return r.$eval(n.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(r.$eval(e)))}):n.dragularModel&&(a.containersModel=r.$eval(n.dragularModel)),n.dragularNameSpace&&(a.nameSpace=n.dragularNameSpace.split(" ")),i=e(t[0],a)}}}])},{"./dragularModule":2}],2:[function(e,r,t){"use strict";r.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,r,t){"use strict";var n=e("./dragularModule"),o={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null};n.factory("dragularService",["$rootScope",function(e){function r(r,u){function v(e){return"function"==typeof e?e:Array.isArray(e)?Array.isArray(e[0])?e:[e]:[]}function x(){1!==arguments.length||Array.isArray(r)||angular.isElement(r)||r[0]||"string"==typeof r?"string"==typeof r&&(ce=document.querySelectorAll(r)):(ue=r||{},ce=[]),le=ue.copyOptions?angular.copy(ue):ue}function S(){angular.extend(le,me),le.classes&&(le.classes=angular.extend({},se,le.classes)),le.eventNames&&(le.eventNames=angular.extend({},de,le.eventNames))}function I(){p(le.boundingBox)||(le.boundingBox=!1),le.containers&&(ce=le.containers),ce=a(ce),le.containersModel=v(le.containersModel),Array.isArray(le.containersFilteredModel)?le.containersFilteredModel=Array.isArray(le.containersFilteredModel[0])?le.containersFilteredModel:[le.containersFilteredModel]:le.containersFilteredModel=[],le.nameSpace||(le.nameSpace=["dragularCommon"]),Array.isArray(le.nameSpace)||(le.nameSpace=[le.nameSpace]),le.nameSpace.forEach(function(e){o.containers[e]||(o.containers[e]=[],o.containersCtx[e]=[]);for(var r=ce.length,t=o.containers[e].length,n=0;r>n;n++)o.containers[e][n+t]=ce[n],o.containersCtx[e][n+t]={o:le,m:w()[n],fm:le.containersFilteredModel[n]}})}function T(e){var r=e?"off":"on";t(O,r,"mouseup",B),ce.forEach(function(e){t(e,"on","mousedown",A)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var r=le.eventNames[e];o.dragOverEvents[r]||(X.createEvent?(o.dragOverEvents[r]=X.createEvent("HTMLEvents"),o.dragOverEvents[r].initEvent(r,!0,!0)):(o.dragOverEvents[r]=X.createEventObject(),o.dragOverEvents[r].eventType=r))})}function A(e){if(1===l(e)&&!e.metaKey&&!e.ctrlKey){o.moveX=e.clientX,o.moveY=e.clientY;var r=L(e.target);r&&r.item&&(o.grabbed=r,F(),"mousedown"===e.type&&(C(r.item)?r.item.focus():e.preventDefault()))}}function B(e){if(z(),ge.dragging){o.clientX=M("clientX",e),o.clientY=M("clientY",e);var r=ae(o.mirror,o.clientX,o.clientY),t=G(r,o.clientX,o.clientY);t&&(o.copy&&le.copySortSource||!o.copy||t!==o.source)?P(o.item,t):le.removeOnSpill?U():K(),o.target=null,o.lastElementBehindCursor&&N(o.lastElementBehindCursor,o.dragOverEvents.dragularrelease,r),le.scope&&le.scope.$emit(le.eventNames.dragularrelease,o.item,o.source)}}function $(e){if(!e)return!1;for(var r=le.nameSpace.length;r--;)if(-1!==o.containers[le.nameSpace[r]].indexOf(e))return!0;return le.isContainer(e)?(o.tempModel=le.isContainerModel(e),!0):(o.tempModel=null,!1)}function w(){return"function"==typeof le.containersModel?v(le.containersModel(ge,o)):le.containersModel}function D(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:a(r);e.forEach(function(e){angular.forEach(le.nameSpace,function(r){var t;t=o.containers[r].indexOf(e),o.containers[r].splice(t,1),o.containersCtx[r].splice(t,1)})})})}function F(e){var r=e?"off":"on";t(O,r,"mousemove",k)}function H(e){var r=e?"off":"on";t(O,r,"selectstart",c),t(O,r,"click",c),t(O,r,"touchmove",c)}function j(){T(!0),D(ce),B({})}function k(e){if(o.grabbed&&!ge.dragging){if(0===l(e))return void B({});if(!e.clientX||e.clientX!==o.moveX||!e.clientY||e.clientY!==o.moveY){if(le.ignoreInputTextSelection){var r=M("clientX",e),t=M("clientY",e),n=X.elementFromPoint(r,t);if(C(n))return}var i=o.grabbed;if(F("remove"),H(),W(),q(i),!le.direction&&b(o.sourceItem)){var a=o.sourceItem.parentNode,c=a.offsetHeight,u=a.offsetWidth,d=o.sourceItem.clientHeight,m=o.sourceItem.clientWidth;le.direction=u/m>c/d?"horizontal":"vertical"}var g=s(o.sourceItem);o.offsetX=M("pageX",e)-g.left,o.offsetY=M("pageY",e)-g.top,o.clientX=M("clientX",e),o.clientY=M("clientY",e),le.boundingBox&&(o.offsetXr=M("pageX",e)-g.right,o.offsetYb=M("pageY",e)-g.bottom),e.preventDefault(),h(o.item,le.classes.transit),re(),o.mirror.style.left=o.clientX-o.offsetX+"px",o.mirror.style.top=o.clientY-o.offsetY+"px",Q(e)}}}function L(e){if(!ge.dragging||!o.mirror){for(var r=e;b(e)&&!$(b(e));){if(le.invalid(e,r))return;if(e=b(e),!e)return}var t=b(e);if(t&&!le.invalid(e,r)&&le.moves(e,t,r,f(e)))return{item:e,source:t}}}function R(e){var r=L(e);r&&q(r)}function q(e){o.sourceItem=o.item=e.item,o.source=e.source,o.initialSibling=o.currentSibling=f(e.item),ie(e.item,e.source)?(o.item=e.item.cloneNode(!0),o.copy=!0,le.scope&&le.scope.$emit(le.eventNames.dragularcloned,o.item,e.item)):o.copy=!1;var r=ce.indexOf(e.source);return o.sourceModel=w()[r],o.sourceFilteredModel=le.containersFilteredModel[r],o.initialIndex=E(e.item,e.source),ge.dragging=!0,le.scope&&le.scope.$emit(le.eventNames.dragulardrag,o.sourceItem,o.source),!0}function W(){ge.dragging&&o.item&&P(o.item,b(o.item))}function z(){o.grabbed=!1,F("remove"),H("remove")}function P(r,t){function n(){le.scope&&(J(t)?le.scope.$emit(le.eventNames.dragularcancel,r,o.source,o.sourceModel,o.initialIndex):le.scope.$emit(le.eventNames.dragulardrop,r,t,o.source,o.sourceModel,o.initialIndex,o.targetModel,i))}if(o.copy&&le.copySortSource&&t===o.source&&b(r)&&r.parentNode.removeChild(o.sourceItem),o.sourceModel&&!J(t)){var i=E(r,t);o.targetCtx.fm&&(i=o.targetCtx.m.indexOf(o.targetCtx.fm[i])),o.sourceFilteredModel&&(o.initialIndex=o.sourceModel.indexOf(o.sourceFilteredModel[o.initialIndex])),e.$applyAsync(function(){t===o.source?o.sourceModel.splice(i,0,o.sourceModel.splice(o.initialIndex,1)[0]):(o.dropElmModel=o.copy?angular.copy(o.sourceModel[o.initialIndex]):o.sourceModel[o.initialIndex],o.tempModel?o.targetModel=o.tempModel:o.targetModel=o.targetCtx.m,t.removeChild(r),o.copy||o.sourceModel.splice(o.initialIndex,1),o.targetModel.splice(i,0,o.dropElmModel)),b(r)&&r.parentNode.removeChild(r),n(),_()})}else n(),_()}function U(){if(ge.dragging){var r=b(o.item);r&&r.removeChild(o.item),o.sourceModel&&e.$applyAsync(function(){o.sourceModel.splice(o.initialIndex,1),_()}),le.scope&&le.scope.$emit(o.copy?le.eventNames.dragularcancel:le.eventNames.dragularremove,o.item,r,o.sourceModel,o.initialIndex),o.sourceModel||_()}}function K(e){if(ge.dragging){var r=arguments.length>0?e:le.revertOnSpill,t=b(o.item),n=J(t);n||o.copy||!r||o.source.insertBefore(o.item,o.initialSibling),!o.sourceModel||o.copy||r?le.scope&&(n||r)&&le.scope.$emit(le.eventNames.dragularcancel,o.item,o.source):P(o.item,t),(!o.sourceModel||o.copy||r||n)&&_()}}function _(){z(),te(),o.item&&y(o.item,le.classes.transit),ge.dragging=!1,le.removeOnSpill===!0&&Z(),le.scope&&(o.lastDropTarget&&le.scope.$emit(le.eventNames.dragularout,o.item,o.lastDropTarget,o.source),le.scope.$emit(le.eventNames.dragulardragend,o.item)),o.source=o.item=o.sourceItem=o.initialSibling=o.currentSibling=o.sourceModel=null,o.initialIndex=o.currentIndex=o.lastDropTarget=o.tempModel=o.targetModel=null,o.dropElmModel=o.targetCtx=o.copy=o.moveX=o.moveY=null}function J(e,r){var t=r||(o.mirror?o.currentSibling:f(o.item));return e===o.source&&t===o.initialSibling}function G(e,r,t){function n(){var n=!1;if($(i)){for(var a=ne(i,e),l=oe(i,a,r,t),c=J(i,l),u=le.nameSpace.length;u--;){if(-1!==o.containers[le.nameSpace[u]].indexOf(i)){o.targetCtx=o.containersCtx[le.nameSpace[u]][o.containers[le.nameSpace[u]].indexOf(i)];break}o.targetCtx||(o.targetCtx=o.containersCtx.dragularCommon[o.containers.dragularCommon.indexOf(i)])}n=c||o.targetCtx.o.accepts(o.item,i,o.source,l,o.sourceModel,o.initialIndex)&&le.canBeAccepted(o.item,i,o.source,l,o.sourceModel,o.initialIndex),o.target!==i&&(o.target=i)}return n}for(var i=e;i&&!n();)i=b(i);return i}function Q(e){function r(e){le.scope&&le.scope.$emit(le.eventNames["dragular"+e],o.item,o.lastDropTarget,o.source),le.removeOnSpill===!0&&("over"===e?V():Z())}if(o.mirror){o.clientX=M("clientX",e),o.clientY=M("clientY",e);var t,n,i,a=o.clientX-o.offsetX,l=o.clientY-o.offsetY;le.boundingBox&&(t=M("pageX",e),n=M("pageY",e),i=s(le.boundingBox)),le.lockY||(!le.boundingBox||t>i.left+o.offsetX&&t<i.right+o.offsetXr?o.mirror.style.left=a+"px":le.boundingBox&&(t<i.left+o.offsetX?o.mirror.style.left=o.clientX-(t-i.left)+"px":o.mirror.style.left=o.clientX-o.mirrorWidth-(t-i.right)+"px")),le.lockX||(!le.boundingBox||n>i.top+o.offsetY&&n<i.bottom+o.offsetYb?o.mirror.style.top=l+"px":le.boundingBox&&(n<i.top+o.offsetY?o.mirror.style.top=o.clientY-(n-i.top)+"px":o.mirror.style.top=o.clientY-o.mirrorHeight-(n-i.bottom)+"px"));var c=ae(o.mirror,o.clientX,o.clientY),u=G(c,o.clientX,o.clientY),d=u!==o.lastDropTarget;if(c!==o.lastElementBehindCursor&&(N(c,o.dragOverEvents.dragularenter,!!u),o.lastElementBehindCursor&&N(o.lastElementBehindCursor,o.dragOverEvents.dragularleave,c),o.lastElementBehindCursor=c),d&&(o.lastDropTarget&&r("out"),o.lastDropTarget=u,r("over")),u===o.source&&o.copy&&!le.copySortSource)return void(b(o.item)&&o.item.parentNode.removeChild(o.item));var m,g=ne(u,c);if(null!==g)m=oe(u,g,o.clientX,o.clientY);else{if(le.revertOnSpill!==!0||o.copy)return void(o.copy&&b(o.item)&&o.item.parentNode.removeChild(o.item));m=o.initialSibling,u=o.source}(null===m||m!==o.item&&m!==f(o.item)&&m!==o.currentSibling)&&(o.currentSibling=m,u.insertBefore(o.item,m),le.scope&&le.scope.$emit(le.eventNames.dragularshadow,o.item,u))}}function V(){y(o.item,le.classes.hide)}function Z(){ge.dragging&&h(o.item,le.classes.hide)}function ee(e){if(o.target){var r=o.target.scrollTop;o.target.scrollTop+=e.deltaY,r!==o.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function re(){if(!o.mirror){var e=o.sourceItem.getBoundingClientRect();o.mirror=o.sourceItem.cloneNode(!0),o.mirrorWidth=e.width,o.mirrorHeight=e.height,o.mirror.style.width=d(e)+"px",o.mirror.style.height=m(e)+"px",y(o.mirror,le.classes.transit),h(o.mirror,le.classes.mirror),le.mirrorContainer.appendChild(o.mirror),t(O,"on","mousemove",Q),h(Y,le.classes.unselectable),t(o.mirror,"on","wheel",ee),le.scope&&le.scope.$emit(le.eventNames.dragularcloned,o.mirror,o.sourceItem)}}function te(){o.mirror&&(y(Y,le.classes.unselectable),t(O,"off","mousemove",Q),t(o.mirror,"off","wheel",ee),b(o.mirror)&&o.mirror.parentNode.removeChild(o.mirror),o.mirror=null)}function ne(e,r){for(var t=r;t!==e&&b(t)!==e;)t=b(t);return t===O?null:t}function oe(e,r,t,n){function o(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>n)return o}return null}function i(){var e=r.getBoundingClientRect();return a(l?t>e.left+d(e)/2:n>e.top+m(e)/2)}function a(e){return e?f(r):r}var l="horizontal"===le.direction;return r!==e?i():o()}function ie(e,r){return"boolean"==typeof le.copy?le.copy:le.copy(e,r)}function ae(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+le.classes.hide,n=X.elementFromPoint(r,t),o.className=i,n}var le,ce=r||[],ue=u||{},se={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},de={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},me={copyOptions:!1,classes:se,eventNames:de,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:n,isContainerModel:g,moves:i,accepts:i,canBeAccepted:i,copy:!1,invalid:n,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:X.body,ignoreInputTextSelection:!1},ge={containers:o.containers,containersCtx:o.containersCtx,sanitizeContainersModel:v,isContainer:$,start:R,end:W,cancel:K,remove:U,destroy:j,dragging:!1};return x(),S(),I(),T(),ge}function t(e,r,t,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[r](o[t],n),i[r](t,n)}function n(){return!1}function i(){return!0}function a(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function l(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function c(e){o.grabbed&&e.preventDefault()}function u(e,r){return"undefined"!=typeof window[r]?window[r]:O.clientHeight?O[e]:Y[e]}function s(e){var r=e.getBoundingClientRect(),t=u("scrollTop","pageYOffset"),n=u("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function d(e){return e.width||e.right-e.left}function m(e){return e.height||e.bottom-e.top}function g(){return{}}function f(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function p(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function v(e){var r=o.classesCache[e];return r?r.lastIndex=0:o.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function h(e,r){var t=e.className;t.length?v(r).test(t)||(e.className+=" "+r):e.className=r}function y(e,r){e.className=e.className.replace(v(r)," ").trim()}function x(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function M(e,r){var t=x(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:-1===t.type.indexOf("end")?t.originalEvent.touches[0][e.replace("client","page")]:!1}function b(e){return e.parentNode===document?null:e.parentNode}function C(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||S(e)}function S(e){return e?"false"===e.contentEditable?!1:"true"===e.contentEditable?!0:S(b(e)):!1}function E(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function N(e,r,t){e&&(o.extra=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}var X=document,Y=X.body,O=X.documentElement;return r.cleanEnviroment=function(){o.classesCache={},o.containersCtx={},o.containers={},o.mirror=void 0},r.shared=o,r}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map
