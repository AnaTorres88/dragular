!function e(r,t,n){function o(a,l){if(!t[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};r[a][0].call(s.exports,function(e){var t=r[a][1][e];return o(t?t:e)},s,s.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){"use strict";var n=e("./dragularModule");n.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i=r.$eval(n.dragular)||o(n.dragular)||{};n.dragularModel?i=angular.extend({containersModel:r.$eval(n.dragularModel)},i):i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=r.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,r,t){"use strict";r.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,r,t){"use strict";var n=e("./dragularModule");n.factory("dragularService",["$rootScope",function(e){function r(r,g){function p(){1!==arguments.length||Array.isArray(r)||angular.isElement(r)||r[0]||"string"==typeof r?"string"==typeof r&&(oe=document.querySelectorAll(r)):(ie=r||{},oe=[])}function x(){angular.extend(de,ie),ie.classes&&(de.classes=angular.extend({},ue,ie.classes)),ie.eventNames&&(de.eventNames=angular.extend({},se,ie.eventNames))}function S(){d(de.boundingBox)||(de.boundingBox=!1),de.containers&&(oe=de.containers),oe=i(oe),Array.isArray(de.containersModel)?de.containersModel=Array.isArray(de.containersModel[0])?de.containersModel:[de.containersModel]:de.containersModel=[],de.nameSpace||(de.nameSpace=["dragularCommon"]),Array.isArray(de.nameSpace)||(de.nameSpace=[de.nameSpace]),de.nameSpace.forEach(function(e){C.containers[e]||(C.containers[e]=[],C.containersCtx[e]=[]);for(var r=oe.length,t=C.containers[e].length,n=0;r>n;n++)C.containers[e][n+t]=oe[n],C.containersCtx[e][n+t]={o:de,m:de.containersModel[n]}})}function E(e){var r=e?"off":"on";t(ce,r,"mouseup",X),oe.forEach(function(e){t(e,"on","mousedown",N)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var r=de.eventNames[e];C.dragOverEvents[r]||(ae.createEvent?(C.dragOverEvents[r]=ae.createEvent("HTMLEvents"),C.dragOverEvents[r].initEvent(r,!0,!0)):(C.dragOverEvents[r]=ae.createEventObject(),C.dragOverEvents[r].eventType=r))})}function N(e){if(e=e||window.event,C.moveX=e.clientX,C.moveY=e.clientY,1===a(e)&&!e.metaKey&&!e.ctrlKey){var r=$(e.target);r&&r.item&&(C.grabbed=r,O(),"mousedown"===e.type&&(y(r.item)?r.item.focus():e.preventDefault()))}}function X(e){if(L(),ge.dragging){e=e||window.event,C.clientX=v("clientX",e),C.clientY=v("clientY",e);var r=ne(C.mirror,C.clientX,C.clientY),t=U(r,C.clientX,C.clientY);t&&(C.copy&&de.copySortSource||!C.copy||t!==C.source)?R(C.item,t):de.removeOnSpill?q():W(),C.target=null,C.lastElementBehindCursor&&M(C.lastElementBehindCursor,C.dragOverEvents.dragularrelease,r),de.scope&&de.scope.$emit(de.eventNames.dragularrelease,C.item,C.source)}}function Y(e){if(!e)return!1;for(var r=de.nameSpace.length;r--;)if(-1!==C.containers[de.nameSpace[r]].indexOf(e))return!0;return de.isContainer(e)?(C.isContainerModel=de.isContainerModel(e),!0):(C.isContainerModel=null,!1)}function I(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:i(r);e.forEach(function(e){angular.forEach(de.nameSpace,function(r){var t;t=C.containers[r].indexOf(e),C.containers[r].splice(t,1),C.containersCtx[r].splice(t,1)})})})}function O(e){var r=e?"off":"on";t(ce,r,"mousemove",A)}function T(e){var r=e?"off":"on";t(ce,r,"selectstart",B),t(ce,r,"click",B),t(ce,r,"touchmove",B)}function w(){E(!0),I(oe),X({})}function B(e){C.grabbed&&e.preventDefault()}function A(e){if(C.grabbed&&!ge.dragging){if(0===a(e))return void X({});if(!e.clientX||e.clientX!==C.moveX||!e.clientY||e.clientY!==C.moveY){if(de.ignoreInputTextSelection){var r=v("clientX",e),t=v("clientY",e),n=ae.elementFromPoint(r,t);if(y(n))return}var o=C.grabbed;if(O(!0),T(),k(),H(o),!de.direction&&h(C.sourceItem)){var i=C.sourceItem.parentNode,l=i.offsetHeight,c=i.offsetWidth,u=C.sourceItem.clientHeight,s=C.sourceItem.clientWidth;de.direction=c/s>l/u?"horizontal":"vertical"}var d=te(C.sourceItem);C.offsetX=v("pageX",e)-d.left,C.offsetY=v("pageY",e)-d.top,C.clientX=v("clientX",e),C.clientY=v("clientY",e),de.boundingBox&&(C.offsetXr=v("pageX",e)-d.right,C.offsetYb=v("pageY",e)-d.bottom),e.preventDefault(),m(C.item,de.classes.transit),G(),C.mirror.style.left=C.clientX-C.offsetX+"px",C.mirror.style.top=C.clientY-C.offsetY+"px",z(e)}}}function $(e){if(!ge.dragging||!C.mirror){for(var r=e;h(e)&&!Y(h(e));){if(de.invalid(e,r))return;if(e=h(e),!e)return}var t=h(e);if(t&&!de.invalid(e,r)&&de.moves(e,t,r,s(e)))return{item:e,source:t}}}function D(e){var r=$(e);r&&H(r)}function H(e){C.sourceItem=C.item=e.item,C.source=e.source,C.initialSibling=C.currentSibling=s(e.item),ee(e.item,e.source)?(C.item=e.item.cloneNode(!0),C.copy=!0,de.scope&&de.scope.$emit(de.eventNames.dragularcloned,C.item,e.item)):C.copy=!1;var r=oe.indexOf(e.source);return C.sourceModel=de.containersModel[r],C.initialIndex=b(e.item,e.source),ge.dragging=!0,de.scope&&de.scope.$emit(de.eventNames.dragulardrag,C.sourceItem,C.source),!0}function j(){return!1}function k(){ge.dragging&&C.item&&R(C.item,h(C.item))}function L(){C.grabbed=!1,O("remove"),T("remove")}function R(r,t){function n(){de.scope&&(F(t)?de.scope.$emit(de.eventNames.dragularcancel,r,C.source,C.sourceModel,C.initialIndex):de.scope.$emit(de.eventNames.dragulardrop,r,t,C.source,C.sourceModel,C.initialIndex,C.targetModel,o))}C.copy&&de.copySortSource&&t===C.source&&h(r)&&r.parentNode.removeChild(C.sourceItem);var o=b(r,t);if(C.sourceModel&&!F(t)){var i=r;e.$applyAsync(function(){t===C.source?C.sourceModel.splice(o,0,C.sourceModel.splice(C.initialIndex,1)[0]):(C.dropElmModel=C.copy?angular.copy(C.sourceModel[C.initialIndex]):C.sourceModel[C.initialIndex],C.isContainerModel?C.targetModel=C.isContainerModel:C.targetModel=C.targetCtx.m,t.removeChild(i),C.copy||C.sourceModel.splice(C.initialIndex,1),C.targetModel.splice(o,0,C.dropElmModel)),h(r)&&r.parentNode.removeChild(r),n(),P()})}else n(),P()}function q(){if(ge.dragging){var r=h(C.item);r&&r.removeChild(C.item),C.sourceModel&&e.$applyAsync(function(){C.sourceModel.splice(C.initialIndex,1),P()}),de.scope&&de.scope.$emit(C.copy?de.eventNames.dragularcancel:de.eventNames.dragularremove,C.item,r,C.sourceModel,C.initialIndex),C.sourceModel||P()}}function W(e){if(ge.dragging){var r=arguments.length>0?e:de.revertOnSpill,t=h(C.item),n=F(t);n||C.copy||!r||C.source.insertBefore(C.item,C.initialSibling),!C.sourceModel||C.copy||r?de.scope&&(n||r)&&de.scope.$emit(de.eventNames.dragularcancel,C.item,C.source):R(C.item,t),(!C.sourceModel||C.copy||r||n)&&P()}}function P(){L(),Q(),C.item&&f(C.item,de.classes.transit),ge.dragging=!1,de.removeOnSpill===!0&&_(),de.scope&&(C.lastDropTarget&&de.scope.$emit(de.eventNames.dragularout,C.item,C.lastDropTarget,C.source),de.scope.$emit(de.eventNames.dragulardragend,C.item)),C.source=C.item=C.sourceItem=C.initialSibling=C.currentSibling=C.sourceModel=null,C.initialIndex=C.currentIndex=C.lastDropTarget=C.isContainerModel=C.targetModel=null,C.dropElmModel=C.targetCtx=C.copy=C.moveX=C.moveY=null}function F(e,r){var t=r||(C.mirror?C.currentSibling:s(C.item));return e===C.source&&t===C.initialSibling}function U(e,r,t){function n(){var n=!1;if(Y(o)){for(var i=V(o,e),a=Z(o,i,r,t),l=F(o,a),c=de.nameSpace.length;c--;){if(-1!==C.containers[de.nameSpace[c]].indexOf(o)){C.targetCtx=C.containersCtx[de.nameSpace[c]][C.containers[de.nameSpace[c]].indexOf(o)];break}C.targetCtx||(C.targetCtx=C.containersCtx.dragularCommon[C.containers.dragularCommon.indexOf(o)])}n=l||C.targetCtx.o.accepts(C.item,o,C.source,a,C.sourceModel,C.initialIndex)&&de.canBeAccepted(C.item,o,C.source,a,C.sourceModel,C.initialIndex),C.target!==o&&(C.target=o)}return n}for(var o=e;o&&!n();)o=h(o);return o}function z(e){function r(e){de.scope&&de.scope.$emit(de.eventNames["dragular"+e],C.item,C.lastDropTarget,C.source),de.removeOnSpill===!0&&("over"===e?K():_())}function t(){g&&r("over")}function n(){C.lastDropTarget&&r("out")}if(C.mirror){e=e||window.event,C.clientX=v("clientX",e),C.clientY=v("clientY",e);var o,i,a,l=C.clientX-C.offsetX,c=C.clientY-C.offsetY;de.boundingBox&&(o=v("pageX",e),i=v("pageY",e),a=te(de.boundingBox)),de.lockY||(!de.boundingBox||o>a.left+C.offsetX&&o<a.right+C.offsetXr?C.mirror.style.left=l+"px":de.boundingBox&&(o<a.left+C.offsetX?C.mirror.style.left=C.clientX-(o-a.left)+"px":C.mirror.style.left=C.clientX-C.mirrorWidth-(o-a.right)+"px")),de.lockX||(!de.boundingBox||i>a.top+C.offsetY&&i<a.bottom+C.offsetYb?C.mirror.style.top=c+"px":de.boundingBox&&(i<a.top+C.offsetY?C.mirror.style.top=C.clientY-(i-a.top)+"px":C.mirror.style.top=C.clientY-C.mirrorHeight-(i-a.bottom)+"px"));var u=ne(C.mirror,C.clientX,C.clientY),d=U(u,C.clientX,C.clientY),g=d!==C.lastDropTarget;if(u!==C.lastElementBehindCursor&&(M(u,C.dragOverEvents.dragularenter,!!d),C.lastElementBehindCursor&&M(C.lastElementBehindCursor,C.dragOverEvents.dragularleave,u),C.lastElementBehindCursor=u),g&&(n(),C.lastDropTarget=d,t()),d===C.source&&C.copy&&!de.copySortSource)return void(h(C.item)&&C.item.parentNode.removeChild(C.item));var m,f=V(d,u);if(null!==f)m=Z(d,f,C.clientX,C.clientY);else{if(de.revertOnSpill!==!0||C.copy)return void(C.copy&&h(C.item)&&C.item.parentNode.removeChild(C.item));m=C.initialSibling,d=C.source}(null===m||m!==C.item&&m!==s(C.item)&&m!==C.currentSibling)&&(C.currentSibling=m,d.insertBefore(C.item,m),de.scope&&de.scope.$emit(de.eventNames.dragularshadow,C.item,d))}}function K(){f(C.item,de.classes.hide)}function _(){ge.dragging&&m(C.item,de.classes.hide)}function J(e){if(C.target){var r=C.target.scrollTop;C.target.scrollTop+=e.deltaY,r!==C.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function G(){if(!C.mirror){var e=C.sourceItem.getBoundingClientRect();C.mirror=C.sourceItem.cloneNode(!0),C.mirrorWidth=e.width,C.mirrorHeight=e.height,C.mirror.style.width=l(e)+"px",C.mirror.style.height=c(e)+"px",f(C.mirror,de.classes.transit),m(C.mirror,de.classes.mirror),de.mirrorContainer.appendChild(C.mirror),t(ce,"on","mousemove",z),m(le,de.classes.unselectable),t(C.mirror,"on","wheel",J),de.scope&&de.scope.$emit(de.eventNames.dragularcloned,C.mirror,C.sourceItem)}}function Q(){C.mirror&&(f(le,de.classes.unselectable),t(ce,"off","mousemove",z),t(C.mirror,"off","wheel",J),h(C.mirror)&&C.mirror.parentNode.removeChild(C.mirror),C.mirror=null)}function V(e,r){for(var t=r;t!==e&&h(t)!==e;)t=h(t);return t===ce?null:t}function Z(e,r,t,n){function o(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),u&&i.left>t)return o;if(!u&&i.top>n)return o}return null}function i(){var e=r.getBoundingClientRect();return a(u?t>e.left+l(e)/2:n>e.top+c(e)/2)}function a(e){return e?s(r):r}var u="horizontal"===de.direction;return r!==e?i():o()}function ee(e,r){return"boolean"==typeof de.copy?de.copy:de.copy(e,r)}function re(e,r){return"undefined"!=typeof window[r]?window[r]:ce.clientHeight?ce[e]:le[e]}function te(e){var r=e.getBoundingClientRect(),t=re("scrollTop","pageYOffset"),n=re("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function ne(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+de.classes.hide,n=ae.elementFromPoint(r,t),o.className=i,n}var oe=r||[],ie=g||{},ae=document,le=ae.body,ce=ae.documentElement,ue={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},se={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},de={classes:ue,eventNames:se,containers:!1,moves:o,accepts:o,canBeAccepted:o,isContainer:n,copy:!1,invalid:j,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:u,mirrorContainer:ae.body,ignoreInputTextSelection:!1};p(),x(),S(),E();var ge={containers:C.containers,containersCtx:C.containersCtx,isContainer:Y,start:D,end:k,cancel:W,remove:q,destroy:w,dragging:!1};return ge}function t(e,r,t,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[r](o[t],n),i[r](t,n)}function n(){return!1}function o(){return!0}function i(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function a(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function l(e){return e.width||e.right-e.left}function c(e){return e.height||e.bottom-e.top}function u(){return{}}function s(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function d(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function g(e){var r=C.classesCache[e];return r?r.lastIndex=0:C.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function m(e,r){var t=e.className;t.length?g(r).test(t)||(e.className+=" "+r):e.className=r}function f(e,r){e.className=e.className.replace(g(r)," ").trim()}function p(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function v(e,r){var t=p(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:-1===t.type.indexOf("end")?t.originalEvent.touches[0][e.replace("client","page")]:!1}function h(e){return e.parentNode===document?null:e.parentNode}function y(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||x(e)}function x(e){return e?"false"===e.contentEditable?!1:"true"===e.contentEditable?!0:x(h(e)):!1}function b(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function M(e,r,t){e&&(C.extra=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}var C={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},S=r;return S.cleanEnviroment=function(){C.classesCache={},C.containersCtx={},C.containers={},C.mirror=void 0},S.shared=C,S}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map
