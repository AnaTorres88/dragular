!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var r=t(1),o=t(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",r)},function(e,n){"use strict";var t=function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return}}var i,a=n.$eval(r.dragular)||o(r.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=n.$eval(a.containersModel)),a&&a.dynamicModelAttribute?n.$watch(function(){return n.$eval(r.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(n.$eval(e)))}):r.dragularModel&&(a.containersModel=n.$eval(r.dragularModel)),r.dragularNameSpace&&(a.nameSpace=r.dragularNameSpace.split(" ")),r.dragularOnInit&&(a.onInit=n.$eval(r.dragularOnInit)),i=e(t[0],a)}}};t.$inject=["dragularService"],e.exports=t},function(e,n){"use strict";var t={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},r=function(e,n){function r(r,d){function x(){1!==arguments.length||$(r)||angular.isElement(r)||r[0]||"string"==typeof r?"string"==typeof r&&(me=document.querySelectorAll(r)):(ge=r||{},me=[]),de=ge.copyOptions?angular.copy(ge):ge}function b(){var e=angular.extend({},he,de);angular.extend(de,e),de.classes&&(e=angular.extend({},pe,de.classes),angular.extend(de.classes,e)),de.eventNames&&(e=angular.extend({},ve,de.eventNames),angular.extend(de.eventNames,e))}function N(){h(de.boundingBox)||(de.boundingBox=!1),de.containers&&(me=de.containers),de.containers=o(me,!1,de.scope),de.containersModel=o(de.containersModel,!0,de.scope),$(de.containersFilteredModel)?de.containersFilteredModel=$(de.containersFilteredModel[0])?de.containersFilteredModel:[de.containersFilteredModel]:de.containersFilteredModel=[],de.nameSpace||(de.nameSpace=["dragularCommon"]),$(de.nameSpace)||(de.nameSpace=[de.nameSpace]),de.nameSpace.forEach(function(e){t.containers[e]||(t.containers[e]=[],t.containersCtx[e]=[]);for(var n=Z(de).length,r=t.containers[e].length,o=0;o<n;o++)t.containers[e][o+r]=Z(de)[o],t.containersCtx[e][o+r]={o:de,m:_(de)[o],fm:de.containersFilteredModel[o]}})}function w(e){var n=e?"off":"on";i(T,n,"mouseup",te),Z(de).forEach(function(e){i(e,"on","mousedown",B)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var n=de.eventNames[e];t.dragOverEvents[n]||(O.createEvent?(t.dragOverEvents[n]=O.createEvent("HTMLEvents"),t.dragOverEvents[n].initEvent(n,!0,!0)):(t.dragOverEvents[n]=O.createEventObject(),t.dragOverEvents[n].eventType=n))})}function B(e){if(1===u(e)&&!e.metaKey&&!e.ctrlKey){t.moveX=e.clientX,t.moveY=e.clientY;var n=H(e.target);n&&n.item&&(t.grabbed=n,A(),"mousedown"===e.type&&(S(e.target)?e.target.focus():e.preventDefault()))}}function A(e){var n=e?"off":"on";i(T,n,"mousemove",D)}function D(e){if(t.grabbed&&!xe.dragging){if(e.originalEvent&&(e=e.originalEvent),0===u(e))return void te({});if(!e.clientX||e.clientX!==t.moveX||!e.clientY||e.clientY!==t.moveY){if(fe(de.ignoreInputTextSelection)){var n=E("clientX",e),r=E("clientY",e),o=O.elementFromPoint(n,r);if(S(o))return}var i=t.grabbed;if(A("remove"),F(),k(),j(i),t.item){if(!de.direction&&C(t.sourceItem)){var a=t.sourceItem.parentNode,l=a.offsetHeight,c=a.offsetWidth,s=t.sourceItem.clientHeight,d=t.sourceItem.clientWidth;de.direction=l/s<c/d?"horizontal":"vertical"}var g=m(t.sourceItem);t.offsetX=E("pageX",e)-g.left,t.offsetY=E("pageY",e)-g.top,t.clientX=E("clientX",e),t.clientY=E("clientY",e),de.boundingBox&&(t.offsetXr=E("pageX",e)-g.right,t.offsetYb=E("pageY",e)-g.bottom),e.preventDefault(),P(),y(t.item,de.classes.transit),t.mirror.style.left=t.clientX-t.offsetX+"px",t.mirror.style.top=t.clientY-t.offsetY+"px",z(e)}}}}function F(e){var n=e?"off":"on";i(T,n,"selectstart",s),i(T,n,"click",s),i(T,n,"touchmove",s)}function H(e){if(!xe.dragging||!t.mirror){for(var n=e;C(e)&&!V(C(e));){if(de.invalid(e,n))return;if(e=C(e),!e)return}var r=C(e);if(r&&!de.invalid(e,n)&&de.moves(e,r,n,v(e)))return{item:e,source:r}}}function j(e){t.sourceItem=t.item=e.item,t.source=e.source,t.initialSibling=t.currentSibling=v(e.item),fe(de.copy,[e.item,e.source])?(t.item=e.item.cloneNode(!0),t.copy=!0,de.scope&&de.scope.$emit(de.eventNames.dragularcloned,t.item,e.item)):t.copy=!1;var n=Z(de).indexOf(e.source);return t.sourceModel=_(de)[n],t.sourceFilteredModel=de.containersFilteredModel[n],t.initialIndex=I(e.item,e.source),xe.dragging=!0,de.scope&&de.scope.$emit(de.eventNames.dragulardrag,t.sourceItem,t.source),!0}function L(e){var n=H(e);n&&(t.grabbed=n,A())}function P(){if(!t.mirror){var e=t.sourceItem.getBoundingClientRect();t.mirror=t.sourceItem.cloneNode(!0),t.mirrorWidth=e.width,t.mirrorHeight=e.height,t.mirror.style.width=g(e)+"px",t.mirror.style.height=f(e)+"px",y(t.mirror,de.classes.mirror),de.mirrorContainer.appendChild(t.mirror),i(T,"on","mousemove",z),y(O.body,de.classes.unselectable),i(t.mirror,"on","wheel",ce),de.scope&&de.scope.$emit(de.eventNames.dragularcloned,t.mirror,t.sourceItem)}}function k(){xe.dragging&&t.item&&re(t.item,C(t.item))}function R(){t.grabbed=!1,A("remove"),F("remove")}function z(e){function n(n){de.scope&&de.scope.$emit(de.eventNames["dragular"+n],t.item,t.lastDropTarget,t.source,e),fe(de.removeOnSpill)===!0&&("over"===n?K():U())}if(t.mirror){e.originalEvent&&(e=e.originalEvent),t.clientX=E("clientX",e),t.clientY=E("clientY",e);var r,o,i,a=t.clientX-t.offsetX,l=t.clientY-t.offsetY;de.boundingBox&&(r=E("pageX",e),o=E("pageY",e),i=m(de.boundingBox)),de.lockY||(!de.boundingBox||r>i.left+t.offsetX&&r<i.right+t.offsetXr?t.mirror.style.left=a+"px":de.boundingBox&&(r<i.left+t.offsetX?t.mirror.style.left=t.clientX-(r-i.left)+"px":t.mirror.style.left=t.clientX-t.mirrorWidth-(r-i.right)+"px")),de.lockX||(!de.boundingBox||o>i.top+t.offsetY&&o<i.bottom+t.offsetYb?t.mirror.style.top=l+"px":de.boundingBox&&(o<i.top+t.offsetY?t.mirror.style.top=t.clientY-(o-i.top)+"px":t.mirror.style.top=t.clientY-t.mirrorHeight-(o-i.bottom)+"px"));var c=Q(t.mirror,t.clientX,t.clientY),u=W(c,t.clientX,t.clientY),s=u!==t.lastDropTarget;if(c!==t.lastElementBehindCursor&&(X(c,t.dragOverEvents.dragularenter,!!u),t.lastElementBehindCursor&&X(t.lastElementBehindCursor,t.dragOverEvents.dragularleave,c),t.lastElementBehindCursor=c),s&&(t.lastDropTarget&&n("out"),t.lastDropTarget=u,n("over")),u===t.source&&t.copy&&!fe(de.copySortSource))return void(C(t.item)&&t.item.parentNode.removeChild(t.item));var d,g=J(u,c);if(null!==g)d=G(u,g,t.clientX,t.clientY);else{if(fe(de.revertOnSpill)!==!0||t.copy)return void(t.copy&&C(t.item)&&t.item.parentNode.removeChild(t.item));d=t.initialSibling,u=t.source}(null===d||d!==t.item&&d!==v(t.item)&&d!==t.currentSibling)&&(t.currentSibling=d,u.insertBefore(t.item,d),de.scope&&de.scope.$emit(de.eventNames.dragularshadow,t.item,u,e))}}function W(e,n,r){function o(){if(!V(a))return!1;for(var o,c=J(a,e),u=G(a,c,n,r),s=q(a,u),d=de.nameSpace.length;d--;)if(o=de.nameSpace[d],t.containers[o].indexOf(a)!==-1){l=i(o);break}return t.target=a,!!s||(l||(l=i("dragularCommon")),l&&"function"==typeof l.o.containersModel&&(l.m=_(l.o)[Z(l.o).indexOf(a)]),!(l&&l.o.accepts&&!l.o.accepts(t.item,a,t.source,u,t.sourceModel,t.initialIndex))&&(!(de.isContainer&&de.isContainerAccepts&&!de.isContainerAccepts(t.item,a,t.source,u,t.sourceModel,t.initialIndex))&&(!de.canBeAccepted||de.canBeAccepted(t.item,a,t.source,u,t.sourceModel,t.initialIndex))))}function i(e){return t.containersCtx[e][t.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=C(a);return t.targetCtx=l||{},a}function K(){M(t.item,de.classes.hide)}function U(){xe.dragging&&y(t.item,de.classes.hide)}function q(e,n){var r=n||(t.mirror?t.currentSibling:v(t.item));return e===t.source&&r===t.initialSibling}function J(e,n){for(var t=n;t!==e&&C(t)!==e;)t=C(t);return t===T?null:t}function G(e,n,t,r){function o(){var n,o,i,a=e.children.length;for(n=0;n<a;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function i(){var e=n.getBoundingClientRect();return a(l?t>e.left+g(e)/2:r>e.top+f(e)/2)}function a(e){return e?v(n):n}var l="horizontal"===de.direction;return n!==e?i():o()}function Q(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+de.classes.hide,r=O.elementFromPoint(n,t),o.className=i,r}function V(e){if(!e)return!1;for(var n=de.nameSpace.length;n--;)if(t.containers[de.nameSpace[n]].indexOf(e)!==-1)return!0;return de.isContainer(e)?(t.tempModel=de.isContainerModel(e),!0):(t.tempModel=null,!1)}function Z(e){return ee("containers",e)}function _(e){return ee("containersModel",e,!0)}function ee(e,n,r){return"function"==typeof n[e]?o(n[e](n===de?xe:null,t),r,n.scope):n[e]}function ne(e){if(xe.dragging){var n=arguments.length>0?e:fe(de.revertOnSpill),r=C(t.item),o=q(r);o||t.copy||!n||t.source.insertBefore(t.item,t.initialSibling),!t.sourceModel||t.copy||n?de.scope&&(o||n)&&de.scope.$emit(de.eventNames.dragularcancel,t.item,t.source,t.sourceModel,t.initialIndex):re(t.item,r),(!t.sourceModel||t.copy||n||o)&&ie()}}function te(e){if(R(),xe.dragging){e.originalEvent&&(e=e.originalEvent),t.clientX=E("clientX",e),t.clientY=E("clientY",e);var n=Q(t.mirror,t.clientX,t.clientY),r=W(n,t.clientX,t.clientY);r&&(t.copy&&fe(de.copySortSource)||!t.copy||r!==t.source)?re(t.item,r):fe(de.removeOnSpill)?oe():ne(),t.target=null,t.lastElementBehindCursor&&X(t.lastElementBehindCursor,t.dragOverEvents.dragularrelease,n),de.scope&&de.scope.$emit(de.eventNames.dragularrelease,t.item,t.source,e)}}function re(r,o){function a(){if(Z(de).forEach(function(e){i(e,"off","mousedown",B),i(e,"on","mousedown",B)}),de.compileItemOnDrop){var e=angular.element(o).scope?angular.element(o).scope():de.scope;e&&e.$applyAsync(function(){var i=n(t.copy?l.cloneNode(!0):l)(e);r.parentNode===o&&o.removeChild(r),o.insertBefore(i[0],c),ie()})}de.scope&&(q(o)?de.scope.$emit(de.eventNames.dragularcancel,r,t.source,t.sourceModel,t.initialIndex):de.scope.$emit(de.eventNames.dragulardrop,r,o,t.source,t.sourceModel,t.initialIndex,t.targetModel,u)),de.compileItemOnDrop||ie()}if(!r)return void ie();var l=t.sourceItem,c=t.currentSibling,u=I(r,o);t.copy&&o===t.source&&C(r)&&fe(de.copySortSource)&&r.parentNode.removeChild(t.sourceItem),t.sourceModel&&!q(o)?(t.targetCtx&&t.targetCtx.fm&&(u=t.targetCtx.m.indexOf(t.targetCtx.fm[u])),t.sourceFilteredModel&&(t.initialIndex=t.sourceModel.indexOf(t.sourceFilteredModel[t.initialIndex])),e.$applyAsync(function(){t.sourceModel&&(o===t.source?t.sourceModel.splice(u,0,t.sourceModel.splice(t.initialIndex,1)[0]):(t.dropElmModel=t.copy&&!de.dontCopyModel?angular.copy(t.sourceModel[t.initialIndex]):t.sourceModel[t.initialIndex],t.tempModel?t.targetModel=t.tempModel:t.targetModel=t.targetCtx&&t.targetCtx.m||t.sourceModel,r.parentNode.removeChild(r),t.copy||t.sourceModel.splice(t.initialIndex,1),t.targetModel&&t.targetModel.splice(u,0,t.dropElmModel)),C(r)&&r.parentNode.removeChild(r),a())})):a()}function oe(){if(xe.dragging){var n=C(t.item);n&&n.removeChild(t.item),t.sourceModel&&e.$applyAsync(function(){t.sourceModel.splice(t.initialIndex,1),ie()}),de.scope&&de.scope.$emit(t.copy?de.eventNames.dragularcancel:de.eventNames.dragularremove,t.item,n,t.sourceModel,t.initialIndex),t.sourceModel||ie()}}function ie(){R(),ue(),t.item&&M(t.item,de.classes.transit),xe.dragging=!1,fe(de.removeOnSpill)===!0&&U(),de.scope&&(t.lastDropTarget&&de.scope.$emit(de.eventNames.dragularout,t.item,t.lastDropTarget,t.source),de.scope.$emit(de.eventNames.dragulardragend,t.item)),t.source=t.item=t.sourceItem=t.initialSibling=t.currentSibling=t.sourceModel=null,t.initialIndex=t.currentIndex=t.lastDropTarget=t.tempModel=t.targetModel=null,t.dropElmModel=t.targetCtx=t.copy=t.moveX=t.moveY=null}function ae(){w(!0),le(de.containers),te({})}function le(n){e.$applyAsync(function(){var e=$(n)?n:c(n);e.forEach(function(e){angular.forEach(de.nameSpace,function(n){var r;r=t.containers[n].indexOf(e),t.containers[n].splice(r,1),t.containersCtx[n].splice(r,1)})})})}function ce(e){if(t.target){e.originalEvent&&(e=e.originalEvent);var n=t.target.scrollTop;t.target.scrollTop+=e.deltaY,n!==t.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function ue(){t.mirror&&(M(O.body,de.classes.unselectable),i(T,"off","mousemove",z),i(t.mirror,"off","wheel",ce),C(t.mirror)&&t.mirror.parentNode.removeChild(t.mirror),t.mirror=null)}function se(e){o(e,!0,de.scope)}var de,me=r||[],ge=d||{},fe=Y,pe={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ve={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},he={copyOptions:!1,classes:pe,eventNames:ve,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:a,isContainerModel:p,isContainerAccepts:l,moves:l,accepts:l,canBeAccepted:l,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:a,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},xe={containers:t.containers,containersCtx:t.containersCtx,sanitizeContainersModel:se,sanitizeContainers:o,isContainer:V,start:L,end:k,cancel:ne,remove:oe,destroy:ae,dragging:!1};return x(),b(),N(),w(),de.onInit&&de.onInit(xe,de),xe}function o(e,n,t){return"function"==typeof e?e:$(e)?n?$(e[0])?e:[e]:e:"string"==typeof e&&t?function(){return t[e]}:e?c(e):[]}function i(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[n]](t,r,{passive:!1}),e[c[n]](o[t],r,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[t]?l[n](i[t],r):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[t]?l[n](a[t],r):o[t]&&l[n](o[t],r),l[n](t,r)}function a(){return!1}function l(){return!0}function c(e,n){return $(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function u(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function s(e){e.originalEvent&&(e=e.originalEvent),t.grabbed&&e.preventDefault()}function d(e,n){return"undefined"!=typeof window[n]?window[n]:T.clientHeight?T[e]:O.body[e]}function m(e){var n=e.getBoundingClientRect(),t=d("scrollTop","pageYOffset"),r=d("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function g(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(){return{}}function v(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}if(e)return e.nextElementSibling||n()}function h(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var n=t.classesCache[e];return n?n.lastIndex=0:t.classesCache[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function y(e,n){var t=e.className;t.length?x(n).test(t)||(e.className+=" "+n):e.className=n}function M(e,n){e.className=e.className.replace(x(n)," ").trim()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function E(e,n){var t=b(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),!t.type||t.type.indexOf("touch")<0?t[e]:t.type.indexOf("end")===-1&&t.originalEvent.touches[0][e.replace("client","page")]}function C(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||N(e)}function N(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||N(C(e))))}function I(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function X(e,n,r){e&&(t.extra=r,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}function Y(e,n,r){return angular.isFunction(e)?!!e.apply(r||this,n||t):!!e}var O=document,T=O.documentElement,$=Array.isArray;return r.cleanEnviroment=function(){t.classesCache={},t.containersCtx={},t.containers={},t.mirror=void 0},r.shared=t,r};r.$inject=["$rootScope","$compile"],e.exports=r}])});
//# sourceMappingURL=dragular.min.js.map
