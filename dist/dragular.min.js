!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.dragular=e()}}(function(){return function e(r,t,n){function o(a,l){if(!t[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};r[a][0].call(s.exports,function(e){var t=r[a][1][e];return o(t?t:e)},s,s.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){"use strict";var n=function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i,a=r.$eval(n.dragular)||o(n.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=r.$eval(a.containersModel)),a&&a.dynamicModelAttribute?r.$watch(function(){return r.$eval(n.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(r.$eval(e)))}):n.dragularModel&&(a.containersModel=r.$eval(n.dragularModel)),n.dragularNameSpace&&(a.nameSpace=n.dragularNameSpace.split(" ")),i=e(t[0],a)}}};n.$inject=["dragularService"],r.exports=n},{}],2:[function(e,r,t){"use strict";var n=e("./dragularDirective"),o=e("./dragularService");r.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",n)},{"./dragularDirective":1,"./dragularService":3}],3:[function(e,r,t){(function(e){"use strict";var t={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},n=function(r){function n(e,n){function s(e){return"function"==typeof e?e:Array.isArray(e)?Array.isArray(e[0])?e:[e]:[]}function h(){1!==arguments.length||Array.isArray(e)||angular.isElement(e)||e[0]||"string"==typeof e?"string"==typeof e&&(le=document.querySelectorAll(e)):(ce=e||{},le=[]),ae=ce.copyOptions?angular.copy(ce):ce}function M(){var e=angular.extend({},fe,ae);angular.extend(ae,e),ae.classes&&(e=angular.extend({},se,ae.classes),angular.extend(ae.classes,e)),ae.eventNames&&(e=angular.extend({},de,ae.eventNames),angular.extend(ae.eventNames,e))}function E(){v(ae.boundingBox)||(ae.boundingBox=!1),ae.containers&&(le=ae.containers),le=l(le),ae.containersModel=s(ae.containersModel),Array.isArray(ae.containersFilteredModel)?ae.containersFilteredModel=Array.isArray(ae.containersFilteredModel[0])?ae.containersFilteredModel:[ae.containersFilteredModel]:ae.containersFilteredModel=[],ae.nameSpace||(ae.nameSpace=["dragularCommon"]),Array.isArray(ae.nameSpace)||(ae.nameSpace=[ae.nameSpace]),ae.nameSpace.forEach(function(e){t.containers[e]||(t.containers[e]=[],t.containersCtx[e]=[]);for(var r=le.length,n=t.containers[e].length,o=0;r>o;o++)t.containers[e][o+n]=le[o],t.containersCtx[e][o+n]={o:ae,m:$()[o],fm:ae.containersFilteredModel[o]}})}function I(e){var r=e?"off":"on";o(w,r,"mouseup",A),le.forEach(function(e){o(e,"on","mousedown",T)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var r=ae.eventNames[e];t.dragOverEvents[r]||(O.createEvent?(t.dragOverEvents[r]=O.createEvent("HTMLEvents"),t.dragOverEvents[r].initEvent(r,!0,!0)):(t.dragOverEvents[r]=O.createEventObject(),t.dragOverEvents[r].eventType=r))})}function T(e){if(1===c(e)&&!e.metaKey&&!e.ctrlKey){t.moveX=e.clientX,t.moveY=e.clientY;var r=j(e.target);r&&r.item&&(t.grabbed=r,F(),"mousedown"===e.type&&(S(r.item)?r.item.focus():e.preventDefault()))}}function A(e){if(W(),me.dragging){t.clientX=b("clientX",e),t.clientY=b("clientY",e);var r=ie(t.mirror,t.clientX,t.clientY),n=G(r,t.clientX,t.clientY);n&&(t.copy&&ue(ae.copySortSource)||!t.copy||n!==t.source)?z(t.item,n):ue(ae.removeOnSpill)?U():K(),t.target=null,t.lastElementBehindCursor&&X(t.lastElementBehindCursor,t.dragOverEvents.dragularrelease,r),ae.scope&&ae.scope.$emit(ae.eventNames.dragularrelease,t.item,t.source)}}function B(e){if(!e)return!1;for(var r=ae.nameSpace.length;r--;)if(-1!==t.containers[ae.nameSpace[r]].indexOf(e))return!0;return ae.isContainer(e)?(t.tempModel=ae.isContainerModel(e),!0):(t.tempModel=null,!1)}function $(){return"function"==typeof ae.containersModel?s(ae.containersModel(me,t)):ae.containersModel}function D(e){r.$applyAsync(function(){var r=Array.isArray(e)?e:l(e);r.forEach(function(e){angular.forEach(ae.nameSpace,function(r){var n;n=t.containers[r].indexOf(e),t.containers[r].splice(n,1),t.containersCtx[r].splice(n,1)})})})}function F(e){var r=e?"off":"on";o(w,r,"mousemove",k)}function H(e){var r=e?"off":"on";o(w,r,"selectstart",u),o(w,r,"click",u),o(w,r,"touchmove",u)}function P(){I(!0),D(le),A({})}function k(e){if(t.grabbed&&!me.dragging){if(0===c(e))return void A({});if(!e.clientX||e.clientX!==t.moveX||!e.clientY||e.clientY!==t.moveY){if(ue(ae.ignoreInputTextSelection)){var r=b("clientX",e),n=b("clientY",e),o=O.elementFromPoint(r,n);if(S(o))return}var i=t.grabbed;if(F("remove"),H(),q(),R(i),!ae.direction&&C(t.sourceItem)){var a=t.sourceItem.parentNode,l=a.offsetHeight,u=a.offsetWidth,s=t.sourceItem.clientHeight,f=t.sourceItem.clientWidth;ae.direction=u/f>l/s?"horizontal":"vertical"}var m=d(t.sourceItem);t.offsetX=b("pageX",e)-m.left,t.offsetY=b("pageY",e)-m.top,t.clientX=b("clientX",e),t.clientY=b("clientY",e),ae.boundingBox&&(t.offsetXr=b("pageX",e)-m.right,t.offsetYb=b("pageY",e)-m.bottom),e.preventDefault(),y(t.item,ae.classes.transit),re(),t.mirror.style.left=t.clientX-t.offsetX+"px",t.mirror.style.top=t.clientY-t.offsetY+"px",Q(e)}}}function j(e){if(!me.dragging||!t.mirror){for(var r=e;C(e)&&!B(C(e));){if(ae.invalid(e,r))return;if(e=C(e),!e)return}var n=C(e);if(n&&!ae.invalid(e,r)&&ae.moves(e,n,r,p(e)))return{item:e,source:n}}}function L(e){var r=j(e);r&&R(r)}function R(e){t.sourceItem=t.item=e.item,t.source=e.source,t.initialSibling=t.currentSibling=p(e.item),ue(ae.copy,[e.item,e.source])?(t.item=e.item.cloneNode(!0),t.copy=!0,ae.scope&&ae.scope.$emit(ae.eventNames.dragularcloned,t.item,e.item)):t.copy=!1;var r=le.indexOf(e.source);return t.sourceModel=$()[r],t.sourceFilteredModel=ae.containersFilteredModel[r],t.initialIndex=N(e.item,e.source),me.dragging=!0,ae.scope&&ae.scope.$emit(ae.eventNames.dragulardrag,t.sourceItem,t.source),!0}function q(){me.dragging&&t.item&&z(t.item,C(t.item))}function W(){t.grabbed=!1,F("remove"),H("remove")}function z(e,n){function o(){ae.scope&&(J(n)?ae.scope.$emit(ae.eventNames.dragularcancel,e,t.source,t.sourceModel,t.initialIndex):ae.scope.$emit(ae.eventNames.dragulardrop,e,n,t.source,t.sourceModel,t.initialIndex,t.targetModel,i))}if(t.copy&&ue(ae.copySortSource)&&n===t.source&&C(e)&&e.parentNode.removeChild(t.sourceItem),t.sourceModel&&!J(n)){var i=N(e,n);t.targetCtx.fm&&(i=t.targetCtx.m.indexOf(t.targetCtx.fm[i])),t.sourceFilteredModel&&(t.initialIndex=t.sourceModel.indexOf(t.sourceFilteredModel[t.initialIndex])),r.$applyAsync(function(){n===t.source?t.sourceModel.splice(i,0,t.sourceModel.splice(t.initialIndex,1)[0]):(t.dropElmModel=t.copy&&!ae.dontCopyModel?angular.copy(t.sourceModel[t.initialIndex]):t.sourceModel[t.initialIndex],t.tempModel?t.targetModel=t.tempModel:t.targetModel=t.targetCtx.m,n.removeChild(e),t.copy||t.sourceModel.splice(t.initialIndex,1),t.targetModel.splice(i,0,t.dropElmModel)),C(e)&&e.parentNode.removeChild(e),o(),_()})}else o(),_()}function U(){if(me.dragging){var e=C(t.item);e&&e.removeChild(t.item),t.sourceModel&&r.$applyAsync(function(){t.sourceModel.splice(t.initialIndex,1),_()}),ae.scope&&ae.scope.$emit(t.copy?ae.eventNames.dragularcancel:ae.eventNames.dragularremove,t.item,e,t.sourceModel,t.initialIndex),t.sourceModel||_()}}function K(e){if(me.dragging){var r=arguments.length>0?e:ue(ae.revertOnSpill),n=C(t.item),o=J(n);o||t.copy||!r||t.source.insertBefore(t.item,t.initialSibling),!t.sourceModel||t.copy||r?ae.scope&&(o||r)&&ae.scope.$emit(ae.eventNames.dragularcancel,t.item,t.source):z(t.item,n),(!t.sourceModel||t.copy||r||o)&&_()}}function _(){W(),te(),t.item&&x(t.item,ae.classes.transit),me.dragging=!1,ue(ae.removeOnSpill)===!0&&Z(),ae.scope&&(t.lastDropTarget&&ae.scope.$emit(ae.eventNames.dragularout,t.item,t.lastDropTarget,t.source),ae.scope.$emit(ae.eventNames.dragulardragend,t.item)),t.source=t.item=t.sourceItem=t.initialSibling=t.currentSibling=t.sourceModel=null,t.initialIndex=t.currentIndex=t.lastDropTarget=t.tempModel=t.targetModel=null,t.dropElmModel=t.targetCtx=t.copy=t.moveX=t.moveY=null}function J(e,r){var n=r||(t.mirror?t.currentSibling:p(t.item));return e===t.source&&n===t.initialSibling}function G(e,r,n){function o(){var o=!1;if(B(i)){for(var a=ne(i,e),l=oe(i,a,r,n),c=J(i,l),u=ae.nameSpace.length;u--;){if(-1!==t.containers[ae.nameSpace[u]].indexOf(i)){t.targetCtx=t.containersCtx[ae.nameSpace[u]][t.containers[ae.nameSpace[u]].indexOf(i)];break}t.targetCtx||(t.targetCtx=t.containersCtx.dragularCommon[t.containers.dragularCommon.indexOf(i)])}o=c||t.targetCtx.o.accepts(t.item,i,t.source,l,t.sourceModel,t.initialIndex)&&ae.canBeAccepted(t.item,i,t.source,l,t.sourceModel,t.initialIndex),t.target!==i&&(t.target=i)}return o}for(var i=e;i&&!o();)i=C(i);return i}function Q(e){function r(e){ae.scope&&ae.scope.$emit(ae.eventNames["dragular"+e],t.item,t.lastDropTarget,t.source),ue(ae.removeOnSpill)===!0&&("over"===e?V():Z())}if(t.mirror){t.clientX=b("clientX",e),t.clientY=b("clientY",e);var n,o,i,a=t.clientX-t.offsetX,l=t.clientY-t.offsetY;ae.boundingBox&&(n=b("pageX",e),o=b("pageY",e),i=d(ae.boundingBox)),ae.lockY||(!ae.boundingBox||n>i.left+t.offsetX&&n<i.right+t.offsetXr?t.mirror.style.left=a+"px":ae.boundingBox&&(n<i.left+t.offsetX?t.mirror.style.left=t.clientX-(n-i.left)+"px":t.mirror.style.left=t.clientX-t.mirrorWidth-(n-i.right)+"px")),ae.lockX||(!ae.boundingBox||o>i.top+t.offsetY&&o<i.bottom+t.offsetYb?t.mirror.style.top=l+"px":ae.boundingBox&&(o<i.top+t.offsetY?t.mirror.style.top=t.clientY-(o-i.top)+"px":t.mirror.style.top=t.clientY-t.mirrorHeight-(o-i.bottom)+"px"));var c=ie(t.mirror,t.clientX,t.clientY),u=G(c,t.clientX,t.clientY),s=u!==t.lastDropTarget;if(c!==t.lastElementBehindCursor&&(X(c,t.dragOverEvents.dragularenter,!!u),t.lastElementBehindCursor&&X(t.lastElementBehindCursor,t.dragOverEvents.dragularleave,c),t.lastElementBehindCursor=c),s&&(t.lastDropTarget&&r("out"),t.lastDropTarget=u,r("over")),u===t.source&&t.copy&&!ue(ae.copySortSource))return void(C(t.item)&&t.item.parentNode.removeChild(t.item));var f,m=ne(u,c);if(null!==m)f=oe(u,m,t.clientX,t.clientY);else{if(ue(ae.revertOnSpill)!==!0||t.copy)return void(t.copy&&C(t.item)&&t.item.parentNode.removeChild(t.item));f=t.initialSibling,u=t.source}(null===f||f!==t.item&&f!==p(t.item)&&f!==t.currentSibling)&&(t.currentSibling=f,u.insertBefore(t.item,f),ae.scope&&ae.scope.$emit(ae.eventNames.dragularshadow,t.item,u))}}function V(){x(t.item,ae.classes.hide)}function Z(){me.dragging&&y(t.item,ae.classes.hide)}function ee(e){if(t.target){var r=t.target.scrollTop;t.target.scrollTop+=e.deltaY,r!==t.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function re(){if(!t.mirror){var e=t.sourceItem.getBoundingClientRect();t.mirror=t.sourceItem.cloneNode(!0),t.mirrorWidth=e.width,t.mirrorHeight=e.height,t.mirror.style.width=f(e)+"px",t.mirror.style.height=m(e)+"px",x(t.mirror,ae.classes.transit),y(t.mirror,ae.classes.mirror),ae.mirrorContainer.appendChild(t.mirror),o(w,"on","mousemove",Q),y(O.body,ae.classes.unselectable),o(t.mirror,"on","wheel",ee),ae.scope&&ae.scope.$emit(ae.eventNames.dragularcloned,t.mirror,t.sourceItem)}}function te(){t.mirror&&(x(O.body,ae.classes.unselectable),o(w,"off","mousemove",Q),o(t.mirror,"off","wheel",ee),C(t.mirror)&&t.mirror.parentNode.removeChild(t.mirror),t.mirror=null)}function ne(e,r){for(var t=r;t!==e&&C(t)!==e;)t=C(t);return t===w?null:t}function oe(e,r,t,n){function o(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>n)return o}return null}function i(){var e=r.getBoundingClientRect();return a(l?t>e.left+f(e)/2:n>e.top+m(e)/2)}function a(e){return e?p(r):r}var l="horizontal"===ae.direction;return r!==e?i():o()}function ie(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+ae.classes.hide,n=O.elementFromPoint(r,t),o.className=i,n}var ae,le=e||[],ce=n||{},ue=Y,se={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},de={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},fe={copyOptions:!1,classes:se,eventNames:de,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:i,isContainerModel:g,moves:a,accepts:a,canBeAccepted:a,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:i,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0},me={containers:t.containers,containersCtx:t.containersCtx,sanitizeContainersModel:s,isContainer:B,start:L,end:q,cancel:K,remove:U,destroy:P,dragging:!1};return h(),M(),E(),I(),me}function o(r,t,n,o){var i={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},a={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},l={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},c=angular.element(r);e.navigator.pointerEnabled?c[t](a[n],o):e.navigator.msPointerEnabled?c[t](l[n],o):i[n]&&c[t](i[n],o),c[t](n,o)}function i(){return!1}function a(){return!0}function l(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function c(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function u(e){t.grabbed&&e.preventDefault()}function s(e,r){return"undefined"!=typeof window[r]?window[r]:w.clientHeight?w[e]:O.body[e]}function d(e){var r=e.getBoundingClientRect(),t=s("scrollTop","pageYOffset"),n=s("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function f(e){return e.width||e.right-e.left}function m(e){return e.height||e.bottom-e.top}function g(){return{}}function p(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function v(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function h(e){var r=t.classesCache[e];return r?r.lastIndex=0:t.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function y(e,r){var t=e.className;t.length?h(r).test(t)||(e.className+=" "+r):e.className=r}function x(e,r){e.className=e.className.replace(h(r)," ").trim()}function M(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,r){var t=M(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:-1===t.type.indexOf("end")?t.originalEvent.touches[0][e.replace("client","page")]:!1}function C(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||E(e)}function E(e){return e?"false"===e.contentEditable?!1:"true"===e.contentEditable?!0:E(C(e)):!1}function N(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function X(e,r,n){e&&(t.extra=n,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}function Y(e,r,n){return angular.isFunction(e)?!!e.apply(n||this,r||t):!!e}var O=document,w=O.documentElement;return n.cleanEnviroment=function(){t.classesCache={},t.containersCtx={},t.containers={},t.mirror=void 0},n.shared=t,n};n.$inject=["$rootScope"],r.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)});
//# sourceMappingURL=dragular.min.js.map
